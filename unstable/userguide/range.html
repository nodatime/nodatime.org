

<!DOCTYPE html>
<!--[if IE 8]> 				 <html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width" />
	<title>Range of valid values</title>

	<!-- foundation default -->
  	<link rel="stylesheet" href="../../css/foundation.css" />

    <!-- syntax highlighting CSS -->
    <link rel="stylesheet" href="../../css/syntax.css">

    <!-- Foundicons -->
    <link rel="stylesheet" href="../../css/general_enclosed_foundicons.css">

    <!-- Prettify -->
    <script src="../../js/prettify/run_prettify.js"></script>

	<script src="../../js/vendor/custom.modernizr.js"></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../../css/main.css">
    <link rel="stylesheet" href="../../css/mobile.css">
</head>
<body>

	<div class="fixed">
		<nav class="top-bar">
			<ul class="title-area">
				<li class="name"><h1><a href="../../">Noda Time</a></h1></li>
				<!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone -->
    			<li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
			</ul>

			<section class="top-bar-section">
				<!-- Right Nav Section -->
			    <ul class="right">
			      <li class="divider"></li>
			      <li class="has-dropdown">
			      	<a href="#" class="active">User Guide</a>
			      	<ul class="dropdown">
			      		<li><label>Versions</label></li>
			      		<li><a href="../../1.0.x/userguide">1.0.x</a></li>
			      		<li><a href="../../1.1.x/userguide">1.1.x</a></li>
			      		<li><a href="../../1.2.x/userguide">1.2.x</a></li>
			      		<li><a href="../../1.3.x/userguide">1.3.x</a></li>
			      		<li class="divider hide-for-small"></li>
			      		<li><a href="../../unstable/userguide">Unstable</a></li>
			      	</ul>
			      </li>
                  <!-- Disable the API link for the moment...
			      <li class="divider hide-for-small"></li>
			      <li><a href="../../api" >API</a></li>
                  -->
			      <li class="divider hide-for-small"></li>
			      <li class="has-dropdown">
			      	<a href="#">API</a>
			      	<ul class="dropdown">
			      		<li><label>Versions</label></li>
			      		<li><a href="../../1.0.x/api">1.0.x</a></li>
			      		<li><a href="../../1.1.x/api">1.1.x</a></li>
			      		<li><a href="../../1.2.x/api">1.2.x</a></li>
			      		<li><a href="../../1.3.x/api">1.3.x</a></li>
			      		<li class="divider hide-for-small"></li>
			      		<li><a href="../../unstable/api">Unstable</a></li>
			      	</ul>
			      </li>
			      <li class="divider"></li>
			      <li>
                                <a href="../../developer" >Developer Guide</a>
			      </li>
			      <li class="divider"></li>
			      <li><a href="../../#info">More Info</a></li>
			      <li class="divider show-for-small"></li>
			      <li class="has-form hide-for-small">
			        <a class="button" href="../../#install">Install</a>
			      </li>
			    </ul>
			</section>

		</nav>
	</div>


	<section class="body">
	



<div class="row">
	<div class="large-9 columns">
		<h1>Range of valid values</h1>
		<p>(None of this is implemented yet!)</p>

<p>Noda Time can only represent values within a limited range. This is for pragmatic reasons:
while it would be possible to try to model every instant since some estimate of the big
bang until some expected &quot;end of time,&quot; this would come at a significant cost to the
experience of the 99.99% of programmers who just need to deal with dates and times in a
reasonably modern (but not far-flung future) era.</p>

<p>The Noda Time 1.x releases supported years between around -27000 and +32000 (in the Gregorian
calendar), but had significant issues around the extremes. Noda Time 2.0 has a smaller range,
with more clearly-defined behaviour.</p>

<h2>Ranges for calendars</h2>

<p>The &quot;main&quot; calendar for Noda Time is the Gregorian calendar. (We actually use <code>CalendarSystem.Iso</code>
by default, but that&#39;s just the Gregorian calendar with slightly different numbering around centuries;
it doesn&#39;t affect ranges.) This is the maximal calendar: a date in any other calendar can <em>always</em> be
converted to the Gregorian calendar.</p>

<p>Additionally, all calendars are restricted to four digit formats, even in year-of-era representations,
which avoids ever having to parse 5-digit years. This leads to a Gregorian calendar from 9999BC to
9999AD inclusive, or -9998 to 9999 in &quot;absolute&quot; years. The range of other calendars is determined from this
and from natural restrictions (such as not being proleptic).</p>

<p>The date range is always a complete number of years - the range shown below is inclusive at both ends, so every
date from the start of the minimum year to the end of the maximum year is valid. (The min/max Gregorian year
shows the Gregorian year corresponding to the min/max calendar values; this does <em>not</em> mean that the whole of
that Gregorian year can be converted into the relevant calendar.)</p>

<table>
    <thead>
        <tr>
            <th>Calendar</th>
            <th>Min year</th>
            <th>Max year</th>
            <th>Min year (Gregorian)</th>
            <th>Max year (Gregorian)</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Gregorian/ISO</td>
            <td>-9998</td>
            <td>9999</td>
            <td>-9998</td>
            <td>9999</td>
        </tr>
        <tr>
            <td>Julian</td>
            <td>-9997</td>
            <td>9998</td>
            <td>-9998</td>
            <td>9999</td>
        </tr>
        <tr>
            <td>Islamic</td>
            <td>1</td>
            <td>9665</td>
            <td>622</td>
            <td>9999</td>
        </tr>
        <tr>
            <td>Persian</td>
            <td>1</td>
            <td>9377</td>
            <td>622</td>
            <td>9999</td>
        </tr>
        <tr>
            <td>Hebrew</td>
            <td>1</td>
            <td>9999</td>
            <td>-3760</td>
            <td>6239</td>
        </tr>
        <tr>
            <td>Coptic</td>
            <td>1</td>
            <td>9715</td>
            <td>284</td>
            <td>9999</td>
        </tr>       
    </tbody>
</table>

<h2>Instant</h2>

<p>The range for <a href="../api/html/T_NodaTime_Instant.htm"><code>Instant</code></a> is simply the range of the Gregorian calendar, in UTC.
In other words, it covers -9998-01-01T00:00:00Z to 9999-12-031T23:59:59.999999999Z inclusive.</p>

<h2><code>LocalDateTime</code>, <code>LocalDate</code>, <code>ZonedDateTime</code>, and <code>OffsetDateTime</code></h2>

<p>All of the types in this heading are based on dates in calendars, and they all have ranges based on that
<em>local</em> date (and thus on the calendar). So even if the logical position on the global time-line for a
<code>ZonedDateTime</code> or <code>OffsetDateTime</code> is out of the range of <code>Instant</code>, the value is still valid. For example, consider
this code:</p>

<div class="example"><pre class="prettyprint code">LocalDate earliestDate = new LocalDate(-9998, 1, 1);
OffsetDateTime offsetDateTime = earliestDate.AtMidnight().WithOffset(Offset.FromHours(10));
</pre></div>

<p>Here, <code>offsetDateTime</code> has a local date/time value of -9998-01-01T00:00:00, but it&#39;s 10 hours ahead of UTC... giving a logical
instant of -9999-12-31T14:00:00Z... which is out of range. That&#39;s fine, and the code above won&#39;t throw an exception... unless
you try to convert <code>offsetDateTime</code> to an <code>Instant</code>.</p>

<h2><code>Duration</code></h2>

<p><a href="../api/html/T_NodaTime_Duration.htm"><code>Duration</code></a> is designed to allow for <em>at least</em> the largest difference in
valid <code>Instant</code> values in either direction. As such, it needs to cover 631,075,881,599,999,999,999 nanoseconds -
which is just shy of 7,304,119 days. Internally, durations are stored in terms of &quot;day&quot; and &quot;nanosecond within the day&quot; (an 
implementation detail to be sure, but one which sometimes affects other decisions).</p>

<p>Additionally, it seems useful to be able to cover the full range of
<a href="http://msdn.microsoft.com/en-us/library/system.timespan"><code>TimeSpan</code></a>, given that <code>Duration</code> is meant to be the roughly-equivalent
type.</p>

<p>The result is that we have a range of days from -2<sup>24</sup> to +2<sup>24</sup>-1 - and the nanosecond part means that the
total range is from -2<sup>24</sup> days inclusive to +2<sup>24</sup> days exclusive - the largest valid <code>Duration</code> is 1 
nanosecond less than 2<sup>24</sup> days.</p>

<h2><code>Period</code></h2>

<p>TBD. (Depends on the redesign...)</p>

<h2>Failure modes</h2>

<p>Assuming Noda Time is bug free<sup>1</sup>, we ensure that if you try to create a value outside the valid
range for that type (via any normal API calls), an exception of one of the following types will be thrown:</p>

<ul>
<li><code>OverflowException</code></li>
<li><code>ArgumentOutOfRangeException</code></li>
<li><code>ArgumentException</code></li>
<li><code>InvalidOperationException</code></li>
</ul>

<p>(TBD: Serialization? We should probably protect against invalid binary data.)</p>

<p>The &quot;best&quot; exception in each case depends very much on the context - but in the aim of code reuse and
performance, we may not always have that context available when the exception is thrown. For example, a call
to <code>OffsetDateTime.ToInstant()</code> doesn&#39;t have any arguments - but internally we may end up calling another method
and passing one or more arguments. If the validation of the &quot;inner&quot; method throws an <code>ArgumentOutOfRangeException</code>,
that&#39;s what you&#39;ll see too. It&#39;s not ideal, but it&#39;s a reasonable balance. You should almost never be catching any
of those exceptions explicitly anyway, so hopefully it&#39;s just a matter of being aware that if one of those exceptions
is thrown from the depths of Noda Time, it&#39;s probably due to a value being out of range somewhere.</p>

<p>As far as possible, we try to ensure that if you try to perform an operation which <em>can</em> succeed, it <em>will</em> succeed.
This is <em>not</em> guaranteed in all cases, however. For example, consider adding a <code>Period</code> consisting of -1 year and 365 days
to -9998-01-01. The &quot;logical&quot; result is a no-op, but as <code>Period</code> addition is performed one unit at a time, it will fail
on the addition of the -1 year.</p>

<p><sup>1</sup> I&#39;m not claiming that it <em>is</em> bug free, but I can&#39;t predict what will happen if there are bugs.</p>

		<ul class="pagination">
		
		
			
			
			
		
			
			
			
		
			
			
			
		
			
			
			
		
			
			
			
		
			
			
			
		
			
			
			
		
			
			
			
		
			
			
			
		
			
			
			
		
			
			
			
		
			
			
			
		
			
			
			
		
			
			
			
		
			
			
			
		
			
			
			
		
			
			
			
		
			
			
			
		
			
			
			
		
			
			
			
		
			
			
			<li class="current hide-for-small"><a href>Range of valid values</a></li>
			
			
		
			
			<li><a href="../../unstable/userguide/bcl-conversions.html"><strong>Next</strong>: BCL conversions</a></li>
			
			
			
		
			
			
			
		
			
			
			
		
			
			
			
		
			
			
			
		
			
			
			
		
			
			
			
		
			
			
			
		
			
			
			
		
			
			
			
		
			
			
			
		
		
		</ul>
	</div>

	<div class="large-3 columns">
		<div class="section-container accordian">
			<section>
				<p class="title" data-section-title>Introduction</p>
				<div class="content" data-section-content>
					<ul class="side-nav">
						
                            
							<li><a href="../../unstable/userguide/index.html" >Overview</a></li>
						
                            
							<li><a href="../../unstable/userguide/rationale.html" >Why does Noda Time exist?</a></li>
						
                            
							<li><a href="../../unstable/userguide/installation.html" >Installation</a></li>
						
					</ul>
				</div>
			</section>
			<section>
				<p class="title" data-section-title>Core</p>
				<div class="content" data-section-content>
					<ul class="side-nav">
						
                            
							<li><a href="../../unstable/userguide/concepts.html" >Core concepts</a></li>
						
                            
							<li><a href="../../unstable/userguide/type-choices.html" >Choosing (and converting) between types</a></li>
						
                            
							<li><a href="../../unstable/userguide/core-types.html" >Core types quick reference</a></li>
						
                            
							<li><a href="../../unstable/userguide/recipes.html" >Recipes</a></li>
						
                            
							<li><a href="../../unstable/userguide/design.html" >Design philosophy and conventions</a></li>
						
                            
							<li><a href="../../unstable/userguide/migration-to-2.html" >Migrating from 1.x to 2.0</a></li>
						
					</ul>
				</div>
			</section>
			<section>
				<p class="title" data-section-title>Text</p>
				<div class="content" data-section-content>
					<ul class="side-nav">
						
                            
							<li><a href="../../unstable/userguide/text.html" >Text handling</a></li>
						
                            
							<li><a href="../../unstable/userguide/duration-patterns.html" >Patterns for Duration values</a></li>
						
                            
							<li><a href="../../unstable/userguide/offset-patterns.html" >Patterns for Offset values</a></li>
						
                            
							<li><a href="../../unstable/userguide/instant-patterns.html" >Patterns for Instant values</a></li>
						
                            
							<li><a href="../../unstable/userguide/localtime-patterns.html" >Patterns for LocalTime values</a></li>
						
                            
							<li><a href="../../unstable/userguide/localdate-patterns.html" >Patterns for LocalDate values</a></li>
						
                            
							<li><a href="../../unstable/userguide/localdatetime-patterns.html" >Patterns for LocalDateTime values</a></li>
						
                            
							<li><a href="../../unstable/userguide/offsetdatetime-patterns.html" >Patterns for OffsetDateTime values</a></li>
						
                            
							<li><a href="../../unstable/userguide/zoneddatetime-patterns.html" >Patterns for ZonedDateTime values</a></li>
						
                            
							<li><a href="../../unstable/userguide/period-patterns.html" >Patterns for Period values</a></li>
						
					</ul>
				</div>
			</section>
			<section>
				<p class="title" data-section-title>Advanced</p>
				<div class="content" data-section-content>
					<ul class="side-nav">
						
                            
							<li><a href="../../unstable/userguide/arithmetic.html" >Date and time arithmetic</a></li>
						
                            
							<li><a href="../../unstable/userguide/range.html" class="active">Range of valid values</a></li>
						
                            
							<li><a href="../../unstable/userguide/bcl-conversions.html" >BCL conversions</a></li>
						
                            
							<li><a href="../../unstable/userguide/serialization.html" >Serialization</a></li>
						
                            
							<li><a href="../../unstable/userguide/calendars.html" >Calendars</a></li>
						
                            
							<li><a href="../../unstable/userguide/threading.html" >Threading</a></li>
						
                            
							<li><a href="../../unstable/userguide/trivia.html" >Trivia</a></li>
						
					</ul>
				</div>
			</section>
			<section>
				<p class="title" data-section-title>Library</p>
				<div class="content" data-section-content>
					<ul class="side-nav">
						
                            
							<li><a href="../../unstable/userguide/testing.html" >Unit testing with Noda Time</a></li>
						
                            
							<li><a href="../../unstable/userguide/tzdb.html" >Updating the time zone database</a></li>
						
                            
							<li><a href="../../unstable/userguide/mono.html" >Mono support</a></li>
						
                            
							<li><a href="../../unstable/userguide/limitations.html" >Limitations of Noda Time</a></li>
						
                            
							<li><a href="../../unstable/userguide/roadmap.html" >Current roadmap</a></li>
						
                            
							<li><a href="../../unstable/userguide/versions.html" >Version history</a></li>
						
					</ul>
				</div>
			</section>
			<footer>Version  unstable  </footer>
		</div>
	</div>
</div>

	</section>

	<footer>
		<div class="row">
			<div class="small-6 columns">
                                <span>The latest version is 1.3.0, released June 27th 2014</span>
			</div>
			<div class="small-6 columns copy">
                                &copy; <a href="http://noda-time.googlecode.com/hg/AUTHORS.txt">The Noda Time Authors</a>,
                                <span class="design">Web Design by <a href="http://nathanpalmer.com">Nathan Palmer</a></span>
			</div>
		</div>
	</footer>

	<script>
	document.write('<script src=' +
	('__proto__' in {} ? '../../js/vendor/zepto' : '../../js/vendor/jquery') +
	'.js><\/script>')
	</script>

  	<script src="../../js/foundation.min.js"></script>
  	

  <!--
  <script src="js/foundation/foundation.js"></script>
  <script src="js/foundation/foundation.alerts.js"></script>
  <script src="js/foundation/foundation.clearing.js"></script>
  <script src="js/foundation/foundation.cookie.js"></script>
  <script src="js/foundation/foundation.dropdown.js"></script>
  <script src="js/foundation/foundation.forms.js"></script>
  <script src="js/foundation/foundation.joyride.js"></script>
  <script src="js/foundation/foundation.magellan.js"></script>
  <script src="js/foundation/foundation.orbit.js"></script>
  <script src="js/foundation/foundation.placeholder.js"></script>
  <script src="js/foundation/foundation.reveal.js"></script>
  <script src="js/foundation/foundation.section.js"></script>
  <script src="js/foundation/foundation.tooltips.js"></script>
  <script src="js/foundation/foundation.topbar.js"></script>
  <script src="js/foundation/foundation.interchange.js"></script>
  -->

  <script>
    $(document).foundation();
  </script>

  <!-- Nuget Button -->
  <script type="text/javascript">
  (function () {
      var nb = document.createElement('script'); nb.type = 'text/javascript'; nb.async = true;
      nb.src = 'http://s.prabir.me/nuget-button/0.2.1/nuget-button.min.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(nb, s);
  })();
  </script>
</body>
</html>
